"use strict";var petQueries=require("../queries/petQueries"),_require=require("uuid"),uuidv4=_require.v4,fs=require("fs");exports.usersPetArrays=function(t,r){var n,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.decoded.userID,e.next=4,regeneratorRuntime.awrap(petQueries.usersPetArraysQuery(n));case 4:s=e.sent,r.send({savedPetsArray:s.savedPetsArray,adoptedPetsArray:s.adoptedPetsArray}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r.status(500).send(e.t0.message);case 11:case"end":return e.stop()}},null,null,[[0,8]])},exports.getAllPetsArray=function(e,t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(petQueries.getAllPetsArrayQuery());case 3:r=e.sent,t.send(r),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),t.status(500).send(e.t0.message);case 11:case"end":return e.stop()}},null,null,[[0,7]])},exports.returnForAdoption=function(t,r){var n,s,a,u,c,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params,s=n.petID,a=n.petName,u=n.petType,c=n.userEmail,o=t.decoded.userID,e.next=5,regeneratorRuntime.awrap(petQueries.returnForAdoptionQuery(s,a,u,c,o));case 5:r.send("Returned Succesfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),r.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.fosterToAdopt=function(t,r){var n,s,a,u,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body,s=n.petID,a=n.name,u=n.type,c=n.userEmail,e.next=4,regeneratorRuntime.awrap(petQueries.fosterToAdoptQuery(s,a,u,c));case 4:r.send("Updated Succesfully!"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),r.status(500).send(e.t0.message);case 11:case"end":return e.stop()}},null,null,[[0,7]])},exports.unsavePet=function(t,r){var n,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params.petID,s=t.decoded.userID,e.next=5,regeneratorRuntime.awrap(petQueries.unsavePetQuery(n,s));case 5:r.send("Unsaved Succesfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),r.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.savePet=function(t,r){var n,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body.petID,s=t.decoded.userID,e.next=5,regeneratorRuntime.awrap(petQueries.savePetQuery(n,s));case 5:r.send("Saved Succesfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),r.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.adoptPet=function(t,r){var n,s,a,u,c,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body,s=n.petID,a=n.name,u=n.type,c=n.userEmail,o=t.decoded.userID,e.next=5,regeneratorRuntime.awrap(petQueries.adoptPetQuery(s,a,u,c,o));case 5:r.send("Adoption Success!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),r.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.fosterPet=function(t,r){var n,s,a,u,c,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body,s=n.petID,a=n.name,u=n.type,c=n.userEmail,o=t.decoded.userID,e.next=5,regeneratorRuntime.awrap(petQueries.fosterPetQuery(s,a,u,c,o));case 5:r.send("Foster Success!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),r.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.basicSearch=function(t,r){var n,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.query.type,e.next=4,regeneratorRuntime.awrap(petQueries.basicSearchQuery(n));case 4:s=e.sent,r.send(s),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.advanceSearch=function(t,r){var n,s,a,u,c,o,i,p,l;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params,s=n.type,a=n.adoptionStatus,u=n.minHeight,c=n.maxHeight,o=n.minWeight,i=n.maxWeight,p=t.query.name,e.next=5,regeneratorRuntime.awrap(petQueries.advanceSearchQuery(s,a,u,c,o,i,p));case 5:l=e.sent,r.send(l),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.addPet=function(t,r){var n,s,a,u,c,o,i,p,l,d,m,v,y,f,g,h,x,w,b;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.file.filename,s=t.body,a=s.type,u=s.adoptionStatus,c=s.name,o=s.colour,i=s.height,p=s.weight,l=s.bio,d=s.dietryRestrictions,m=s.hypoallergenic,v=s.breed,y=s.adminEmail,f=JSON.parse(i),g=JSON.parse(p),h=JSON.parse(m),x="available"===u?!0:!1,w=uuidv4(),b=(new Date).toISOString().slice(0,19).replace("T"," "),e.next=12,regeneratorRuntime.awrap(petQueries.addPetQuery(n,a,u,c,o,f,g,l,d,h,v,y,x,w,b));case 12:r.send("Added Successfully!"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),r.status(500).send(e.t0.message);case 18:case"end":return e.stop()}},null,null,[[0,15]])},exports.editPetWithNewPhoto=function(t,r){var n,s,a,u,c,o,i,p,l,d,m,v,y,f,g,h,x,w,b;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.file.filename,s=t.body,a=s.petID,u=s.type,c=s.adoptionStatus,o=s.name,i=s.colour,p=s.height,l=s.weight,d=s.bio,m=s.dietryRestrictions,v=s.hypoallergenic,y=s.breed,f=s.adminEmail,g=s.oldPicturePath,h=JSON.parse(p),x=JSON.parse(l),w=JSON.parse(v),b="available"===c?!0:!1,e.next=10,regeneratorRuntime.awrap(petQueries.editPetWithNewPhotoQuery(n,a,u,c,o,i,h,x,d,m,w,y,f,b));case 10:fs.unlinkSync("../frontend/src/images/".concat(g)),r.send("Updated Successfully!"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 18:case"end":return e.stop()}},null,null,[[0,14]])},exports.editPetWithoutNewPhoto=function(t,r){var n,s,a,u,c,o,i,p,l,d,m,v,y,f;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body,s=n.petID,a=n.type,u=n.adoptionStatus,c=n.name,o=n.colour,i=n.height,p=n.weight,l=n.bio,d=n.dietryRestrictions,m=n.hypoallergenic,v=n.breed,y=n.adminEmail,f="available"===u?!0:!1,e.next=6,regeneratorRuntime.awrap(petQueries.editPetWithoutNewPhotoQuery(s,a,u,c,o,i,p,l,d,m,v,y,f));case 6:r.send("Updated Successfully!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.deletePet=function(t,r){var n,s,a,u,c,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.params,s=n.petID,a=n.petName,u=n.petType,c=n.adminEmail,o=n.picture_path,e.next=4,regeneratorRuntime.awrap(petQueries.deletePetQuery(s,a,u,c));case 4:fs.unlinkSync("../frontend/src/images/".concat(o)),r.send("Delete Succesful!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),r.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])};