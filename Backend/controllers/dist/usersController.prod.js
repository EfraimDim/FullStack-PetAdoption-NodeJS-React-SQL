"use strict";var _require=require("uuid"),uuidv4=_require.v4,_require2=require("../models/queryModel"),query=_require2.query;exports.login=function(e,t){try{var r=e.token;t.send({token:r,userInfo:e.body.user,message:"Login Success!"})}catch(e){console.log(e),t.status(500).send(e.message)}},exports.signUpUser=function(t,r){var s,n,a,c,o,u,i,l,d;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=t.body,n=s.email,a=s.password,c=s.firstName,o=s.lastName,u=s.phoneNumber,i=s.admin,l=(new Date).toISOString().slice(0,19).replace("T"," "),d=uuidv4(),e.next=6,regeneratorRuntime.awrap(query("INSERT INTO users (user_ID, email, password, first_name, last_name, phone, admin_status, date_created, bio) VALUES ('".concat(d,"', '").concat(n.toLowerCase(),"', '").concat(a,"', '").concat(c,"', '").concat(o,"', '").concat(u,"', ").concat(i,", '").concat(l,"', '')")));case 6:r.send("Register Succesful!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.updateUserPassword=function(t,r){var s,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=t.body.password,n=t.decoded.userID,e.next=5,regeneratorRuntime.awrap(query('UPDATE users SET password = "'.concat(s,'" WHERE user_ID = "').concat(n,'"')));case 5:r.send("Updated Password Succesfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.updateUserProfile=function(t,r){var s,n,a,c,o,u,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=t.body,n=s.email,a=s.firstName,c=s.lastName,o=s.phoneNumber,u=s.bio,i=t.decoded.userID,e.next=5,regeneratorRuntime.awrap(query('UPDATE users SET email = "'.concat(n,'", first_name = "').concat(a,'", last_name = "').concat(c,'", phone = "').concat(o,'", bio = "').concat(u,'" WHERE user_ID = "').concat(i,'"')));case 5:e.sent,r.send("Updated Profile Succesfully!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.getAllPublicUsers=function(e,t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query("SELECT user_ID, email, first_name, last_name, phone, bio, date_created, admin_status FROM users where admin_status = 0"));case 3:r=e.sent,t.send(r),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t.status(500).send(e.t0.message);case 11:case"end":return e.stop()}},null,null,[[0,7]])},exports.getAllAdminUsers=function(e,t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query("SELECT user_ID, email, first_name, last_name, phone, bio, date_created, admin_status FROM users where admin_status = 1"));case 3:r=e.sent,t.send(r),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t.status(500).send(e.t0.message);case 11:case"end":return e.stop()}},null,null,[[0,7]])},exports.getViewedUsersPets=function(t,r){var s,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=t.query.viewedUserID,e.next=4,regeneratorRuntime.awrap(query('SELECT * FROM pets JOIN adoptedPets on pets.pet_ID = adoptedPets.pet_ID WHERE user_ID = "'.concat(s,'"')));case 4:n=e.sent,r.send(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])};