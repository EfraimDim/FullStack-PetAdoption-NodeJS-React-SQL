"use strict";var userQueries=require("../queries/userQueries"),_require=require("uuid"),uuidv4=_require.v4;exports.login=function(e,r){try{var s=e.token;r.send({token:s,userInfo:e.body.user,message:"Login Success!"})}catch(e){console.log(e),r.status(500).send(e.message)}},exports.signUpUser=function(r,s){var n,t,a,u,c,o,i,l;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.body,t=n.email,a=n.password,u=n.firstName,c=n.lastName,o=n.phoneNumber,i=n.admin,l=uuidv4(),e.next=5,regeneratorRuntime.awrap(userQueries.signUpUserQuery(t,a,u,c,o,i,l));case 5:s.send("Register Succesful!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),s.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.updateUserPassword=function(r,s){var n,t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.body.password,t=r.decoded.userID,e.next=5,regeneratorRuntime.awrap(userQueries.updateUserPasswordQuery(n,t));case 5:s.send("Updated Password Succesfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),s.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.updateUserProfile=function(r,s){var n,t,a,u,c,o,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.body,t=n.email,a=n.firstName,u=n.lastName,c=n.phoneNumber,o=n.bio,i=r.decoded.userID,e.next=5,regeneratorRuntime.awrap(userQueries.updateUserProfileQuery(t,a,u,c,o,i));case 5:e.sent,s.send("Updated Profile Succesfully!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),s.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.adminUserNewsfeedArrays=function(e,r){var s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(userQueries.adminUserNewsfeedArraysQuery());case 3:s=e.sent,r.send({usersArray:s.usersArray,newsfeedArray:s.newsfeedArray,enquiryArray:s.enquiryArray}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 11:case"end":return e.stop()}},null,null,[[0,7]])},exports.getViewedUsersPets=function(r,s){var n,t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.query.viewedUserID,e.next=4,regeneratorRuntime.awrap(userQueries.getViewedUsersPetsQuery(n));case 4:t=e.sent,s.send(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),s.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.sendEnquiry=function(r,s){var n,t,a,u,c,o,i,l,d;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.body,t=n.email,a=n.firstName,u=n.lastName,c=n.phone,o=n.enquiry,i=r.decoded.userID,l=uuidv4(),d=(new Date).toJSON().slice(0,19).replace("T"," "),e.next=7,regeneratorRuntime.awrap(userQueries.sendEnquiryQuery(t,a,u,c,o,i,l,d));case 7:s.send("Enquiry Sent Succesful!"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),s.status(500).send(e.t0.message);case 14:case"end":return e.stop()}},null,null,[[0,10]])},exports.enquiryToInProgress=function(r,s){var n,t,a,u,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.body,t=n.enquiryID,a=n.adminEmail,u=n.userEmail,c=r.decoded.userID,e.next=5,regeneratorRuntime.awrap(userQueries.enquiryToInProgressQuery(t,a,u,c));case 5:e.sent,s.send("Updated Enquiry Succesfully!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),s.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.enquiryToResolved=function(r,s){var n,t,a,u,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.body,t=n.enquiryID,a=n.adminEmail,u=n.userEmail,c=r.decoded.userID,e.next=5,regeneratorRuntime.awrap(userQueries.enquiryToResolvedQuery(t,a,u,c));case 5:e.sent,s.send("Updated Enquiry Succesfully!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),s.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.enquiryToDelete=function(r,s){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.params.enquiryID,e.next=4,regeneratorRuntime.awrap(userQueries.enquiryToDeleteQuery(n));case 4:e.sent,s.send("Deleted Enquiry Succesfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),s.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.enquirySearch=function(r,s){var n,t,a,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.query,t=n.email,a=n.date,e.next=4,regeneratorRuntime.awrap(userQueries.enquirySearchQuery(t,a));case 4:u=e.sent,s.send(u),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),s.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.makeAdmin=function(r,s){var n,t,a,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.body,t=n.adminEmail,a=n.publicUserEmail,u=n.publicUserID,e.next=4,regeneratorRuntime.awrap(userQueries.makeAdminQuery(t,a,u));case 4:e.sent,s.send("Updated Admin Succesfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),s.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.lastSeenPets=function(r,s){var n,t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.body.allPetArrayIDsString,t=r.decoded.userID,e.next=5,regeneratorRuntime.awrap(userQueries.lastSeenPetsQuery(n,t));case 5:e.sent,s.send("Updated Succesfully!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),s.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])};