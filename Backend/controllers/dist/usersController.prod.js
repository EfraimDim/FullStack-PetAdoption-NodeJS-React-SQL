"use strict";var _require=require("uuid"),uuidv4=_require.v4,_require2=require("../models/queryModel"),query=_require2.query;exports.login=function(e,r){try{var t=e.token;r.send({token:t,userInfo:e.body.user,message:"Login Success!"})}catch(e){console.log(e),r.status(400).send({error:e.message})}},exports.signUpPublicUser=function(r,t){var s,n,a,c,o,u,i,d;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r.body,n=s.email,a=s.password,c=s.firstName,o=s.lastName,u=s.phoneNumber,i=(new Date).toISOString().slice(0,19).replace("T"," "),d=uuidv4(),e.next=6,regeneratorRuntime.awrap(query("INSERT INTO users (user_ID, email, password, first_name, last_name, phone, admin_status, date_created, bio) VALUES ('".concat(d,"', '").concat(n.toLowerCase(),"', '").concat(a,"', '").concat(c,"', '").concat(o,"', ").concat(u,", FALSE, '").concat(i,"', '')")));case 6:t.send("Register Succesful!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.status(400).send({error:e.t0.message});case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.updateUserPassword=function(r,t){var s,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r.body.password,n=r.decoded,e.next=5,regeneratorRuntime.awrap(query('UPDATE users SET password = "'.concat(s,'" WHERE user_ID = "').concat(n.userID,'"')));case 5:t.send("Updated Password Succesfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.status(400).send({error:e.t0.message});case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.updateUserProfile=function(r,t){var s,n,a,c,o,u,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r.body,n=s.email,a=s.firstName,c=s.lastName,o=s.phoneNumber,u=s.bio,i=r.decoded,e.next=5,regeneratorRuntime.awrap(query('UPDATE users SET email = "'.concat(n,'", first_name = "').concat(a,'", last_name = "').concat(c,'", phone = ').concat(o,', bio = "').concat(u,'" WHERE user_ID = "').concat(i.userID,'"')));case 5:e.sent,t.send("Updated Profile Succesfully!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.status(400).send({error:e.t0.message});case 13:case"end":return e.stop()}},null,null,[[0,9]])};