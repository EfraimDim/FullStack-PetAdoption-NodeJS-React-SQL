"use strict";function _templateObject6(){var e=_taggedTemplateLiteral(["SELECT * FROM pets JOIN adoptedPets on pets.pet_ID = adoptedPets.pet_ID WHERE user_ID = ",""]);return _templateObject6=function(){return e},e}function _templateObject5(){var e=_taggedTemplateLiteral(["SELECT user_ID, email, first_name, last_name, phone, bio, date_created, admin_status FROM users where admin_status = 1"]);return _templateObject5=function(){return e},e}function _templateObject4(){var e=_taggedTemplateLiteral(["SELECT user_ID, email, first_name, last_name, phone, bio, date_created, admin_status FROM users where admin_status = 0"]);return _templateObject4=function(){return e},e}function _templateObject3(){var e=_taggedTemplateLiteral(["UPDATE users SET email = ",", first_name = ",", last_name = ",", phone = ",", bio = "," WHERE user_ID = ",""]);return _templateObject3=function(){return e},e}function _templateObject2(){var e=_taggedTemplateLiteral(["UPDATE users SET password = "," WHERE user_ID = ",""]);return _templateObject2=function(){return e},e}function _templateObject(){var e=_taggedTemplateLiteral(["INSERT INTO users (user_ID, email, password, first_name, last_name, phone, admin_status, date_created, bio) VALUES (",", ",", ",", ",", ",", ",", ",", ",", '')"]);return _templateObject=function(){return e},e}function _taggedTemplateLiteral(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var SQL=require("@nearform/sql"),_require=require("uuid"),uuidv4=_require.v4,_require2=require("../lib/mysql"),query=_require2.query;exports.login=function(e,t){try{var r=e.token;t.send({token:r,userInfo:e.body.user,message:"Login Success!"})}catch(e){console.log(e),t.status(500).send(e.message)}},exports.signUpUser=function(t,r){var n,a,s,u,c,o,l,i,p;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body,a=n.email,s=n.password,u=n.firstName,c=n.lastName,o=n.phoneNumber,l=n.admin,i=(new Date).toISOString().slice(0,19).replace("T"," "),p=uuidv4(),e.next=6,regeneratorRuntime.awrap(query(SQL(_templateObject(),p,a.toLowerCase(),s,u,c,o,l,i)));case 6:r.send("Register Succesful!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.updateUserPassword=function(t,r){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body.password,a=t.decoded.userID,e.next=5,regeneratorRuntime.awrap(query(SQL(_templateObject2(),n,a)));case 5:r.send("Updated Password Succesfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])},exports.updateUserProfile=function(t,r){var n,a,s,u,c,o,l;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body,a=n.email,s=n.firstName,u=n.lastName,c=n.phoneNumber,o=n.bio,l=t.decoded.userID,e.next=5,regeneratorRuntime.awrap(query(SQL(_templateObject3(),a,s,u,c,o,l)));case 5:e.sent,r.send("Updated Profile Succesfully!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.getAllPublicUsers=function(e,t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject4())));case 3:r=e.sent,t.send(r),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t.status(500).send(e.t0.message);case 11:case"end":return e.stop()}},null,null,[[0,7]])},exports.getAllAdminUsers=function(e,t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject5())));case 3:r=e.sent,t.send(r),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t.status(500).send(e.t0.message);case 11:case"end":return e.stop()}},null,null,[[0,7]])},exports.getViewedUsersPets=function(t,r){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.query.viewedUserID,e.next=4,regeneratorRuntime.awrap(query(SQL(_templateObject6(),n)));case 4:a=e.sent,r.send(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),r.status(500).send(e.t0.message);case 12:case"end":return e.stop()}},null,null,[[0,8]])};