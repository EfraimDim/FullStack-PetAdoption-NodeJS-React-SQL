"use strict";var token=JSON.parse(localStorage.getItem("token")),headers={Authorization:"Bearer ".concat(token)};function getAllPrivatePosts(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(axios.get("posts/getAllPrivatePosts",{headers:headers}));case 3:renderArrayToDom(e.sent.data.posts),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},null,null,[[0,7]])}function deletePost(r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:try{swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this post!",icon:"warning",buttons:!0,dangerMode:!0}).then(function(t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(t)return e.next=3,regeneratorRuntime.awrap(axios.delete("/posts/deletePost/".concat(r),{headers:headers}));e.next=8;break;case 3:renderArrayToDom(e.sent.data.posts),swal("Poof! Your post has been deleted!",{icon:"success"}),e.next=9;break;case 8:swal("Your post is safe!");case 9:case"end":return e.stop()}})})}catch(e){console.error(e)}case 1:case"end":return e.stop()}})}function moveToPostEdit(t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(axios.get("/posts/getPrivatePostID?postID=".concat(t),{headers:headers}));case 3:r=e.sent,window.location.href="/postedit.html?postID=".concat(r.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},null,null,[[0,7]])}function renderArrayToDom(e){try{var t=document.querySelector(".holder"),r="";e.forEach(function(e){!0===e.edited&&(e.title="".concat(e.title," (edited)")),r+='<div class="holder__post" id=\''.concat(e.postID,'\'>\n                <div class="holder__post__wrapper">\n                    <div class="holder__post__wrapper__header">Title:</div>\n                    <div class="holder__post__wrapper__title">').concat(e.title,'</div>\n                </div>\n                <button class="holder__edit" onclick=\'moveToPostEdit("').concat(e.postID,'")\'>View/Edit</button>\n                <button class="holder__delete" onclick=\'deletePost("').concat(e.postID,"\")'>Delete</button>\n                </div>")}),t.innerHTML=r}catch(e){console.error(e)}}window.addEventListener("load",getAllPrivatePosts);