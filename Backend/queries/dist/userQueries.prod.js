"use strict";function _templateObject16(){var e=_taggedTemplateLiteral(["UPDATE users SET last_seen_pet_IDs = "," WHERE user_ID = ",""]);return _templateObject16=function(){return e},e}function _templateObject15(){var e=_taggedTemplateLiteral(["DELETE FROM adoptedPets WHERE user_ID = ",""]);return _templateObject15=function(){return e},e}function _templateObject14(){var e=_taggedTemplateLiteral(["DELETE FROM savedPets WHERE user_ID = ",""]);return _templateObject14=function(){return e},e}function _templateObject13(){var e=_taggedTemplateLiteral(['UPDATE pets JOIN adoptedPets on pets.pet_ID = adoptedPets.pet_ID SET adoption_status = "available", availability = true WHERE user_ID = '," "]);return _templateObject13=function(){return e},e}function _templateObject12(){var e=_taggedTemplateLiteral(["UPDATE users SET admin_status = TRUE  WHERE user_ID = ",""]);return _templateObject12=function(){return e},e}function _templateObject11(){var e=_taggedTemplateLiteral(["DELETE FROM enquiry WHERE enquiry_ID = ",""]);return _templateObject11=function(){return e},e}function _templateObject10(){var e=_taggedTemplateLiteral(["UPDATE enquiry SET admin_ID = ",", admin_Email = ",', status = "resolved" WHERE enquiry_ID = ',""]);return _templateObject10=function(){return e},e}function _templateObject9(){var e=_taggedTemplateLiteral(["UPDATE enquiry SET admin_ID = ",", admin_Email = ",', status = "in progress" WHERE enquiry_ID = ',""]);return _templateObject9=function(){return e},e}function _templateObject8(){var e=_taggedTemplateLiteral(["INSERT INTO enquiry (user_ID, enquiry_ID, user_Email, first_name, last_name, phone, enquiry, date_created) VALUES (",", ",", ",", ",", ",", ",", ",", ",")"]);return _templateObject8=function(){return e},e}function _templateObject7(){var e=_taggedTemplateLiteral(["SELECT * FROM pets JOIN adoptedPets on pets.pet_ID = adoptedPets.pet_ID WHERE user_ID = ",""]);return _templateObject7=function(){return e},e}function _templateObject6(){var e=_taggedTemplateLiteral(["SELECT * FROM enquiry"]);return _templateObject6=function(){return e},e}function _templateObject5(){var e=_taggedTemplateLiteral(["SELECT * FROM newsfeed"]);return _templateObject5=function(){return e},e}function _templateObject4(){var e=_taggedTemplateLiteral(["SELECT user_ID, email, first_name, last_name, phone, bio, date_created, admin_status FROM users"]);return _templateObject4=function(){return e},e}function _templateObject3(){var e=_taggedTemplateLiteral(["UPDATE users SET email = ",", first_name = ",", last_name = ",", phone = ",", bio = "," WHERE user_ID = ",""]);return _templateObject3=function(){return e},e}function _templateObject2(){var e=_taggedTemplateLiteral(["UPDATE users SET password = "," WHERE user_ID = ",""]);return _templateObject2=function(){return e},e}function _templateObject(){var e=_taggedTemplateLiteral(["INSERT INTO users (user_ID, email, password, first_name, last_name, phone, admin_status, bio) VALUES (",", ",", ",", ",", ",", ",", ",", '')"]);return _templateObject=function(){return e},e}function _taggedTemplateLiteral(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var SQL=require("@nearform/sql"),_require=require("../lib/mysql"),query=_require.query;exports.signUpUserQuery=function(t,r,n,a,s,u,c){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject(),c,t.toLowerCase(),r,n,a,s,u)));case 3:if(e.sent,!0===u)return e.next=7,regeneratorRuntime.awrap(query('INSERT INTO newsfeed (news) VALUES ("New Admin User! Email: '.concat(t," Name: ").concat(n," ").concat(a,'!")')));e.next=10;break;case 7:e.sent,e.next=13;break;case 10:return e.next=12,regeneratorRuntime.awrap(query('INSERT INTO newsfeed (news) VALUES ("New Public User! Email: '.concat(t," Name: ").concat(n," ").concat(a,'!")')));case 12:e.sent;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),res.status(500).send(e.t0.message);case 19:case"end":return e.stop()}},null,null,[[0,15]])},exports.updateUserPasswordQuery=function(t,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject2(),t,r)));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),res.status(500).send(e.t0.message);case 9:case"end":return e.stop()}},null,null,[[0,5]])},exports.updateUserProfileQuery=function(t,r,n,a,s,u){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject3(),t,r,n,a,s,u)));case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),res.status(500).send(e.t0.message);case 10:case"end":return e.stop()}},null,null,[[0,6]])},exports.adminUserNewsfeedArraysQuery=function(){var t,r,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject4())));case 3:return t=e.sent,e.next=6,regeneratorRuntime.awrap(query(SQL(_templateObject5())));case 6:return r=e.sent,e.next=9,regeneratorRuntime.awrap(query(SQL(_templateObject6())));case 9:return n=e.sent,e.abrupt("return",{usersArray:t,newsfeedArray:r,enquiryArray:n});case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),res.status(500).send(e.t0.message);case 17:case"end":return e.stop()}},null,null,[[0,13]])},exports.getViewedUsersPetsQuery=function(t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject7(),t)));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),res.status(500).send(e.t0.message);case 11:case"end":return e.stop()}},null,null,[[0,7]])},exports.sendEnquiryQuery=function(t,r,n,a,s,u,c,o){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject8(),u,c,t,r,n,a,s,o)));case 3:return e.sent,e.next=6,regeneratorRuntime.awrap(query('INSERT INTO newsfeed (news) VALUES ("New Enquiry! Email: '.concat(t," Name: ").concat(r," ").concat(n,' has sent an enquiry!")')));case 6:e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),res.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.enquiryToInProgressQuery=function(t,r,n,a){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject9(),a,r,t)));case 3:return e.sent,e.next=6,regeneratorRuntime.awrap(query('INSERT INTO newsfeed (news) VALUES ("Enquiry Status Change! Admin: '.concat(r," now resolving ").concat(n,' enquiry")')));case 6:e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),res.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.enquiryToResolvedQuery=function(t,r,n,a){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject10(),a,r,t)));case 3:return e.sent,e.next=6,regeneratorRuntime.awrap(query('INSERT INTO newsfeed (news) VALUES ("Enquiry Status Change! Admin: '.concat(r," has resolved ").concat(n,' enquiry!")')));case 6:e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),res.status(500).send(e.t0.message);case 13:case"end":return e.stop()}},null,null,[[0,9]])},exports.enquiryToDeleteQuery=function(t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject11(),t)));case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),res.status(500).send(e.t0.message);case 10:case"end":return e.stop()}},null,null,[[0,6]])},exports.enquirySearchQuery=function(t,r){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query("SELECT * FROM enquiry WHERE user_Email LIKE '%".concat(t,"%' AND date_created LIKE '%").concat(r,"%'")));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),res.status(500).send(e.t0.message);case 11:case"end":return e.stop()}},null,null,[[0,7]])},exports.makeAdminQuery=function(t,r,n){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject12(),n)));case 3:return e.sent,e.next=6,regeneratorRuntime.awrap(query(SQL(_templateObject13(),n)));case 6:return e.sent,e.next=9,regeneratorRuntime.awrap(query(SQL(_templateObject14(),n)));case 9:return e.sent,e.next=12,regeneratorRuntime.awrap(query(SQL(_templateObject15(),n)));case 12:return e.sent,e.next=15,regeneratorRuntime.awrap(query('INSERT INTO newsfeed (news) VALUES ("Admin: '.concat(t," has made ").concat(r,' an admin!")')));case 15:e.sent,e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0),res.status(500).send(e.t0.message);case 22:case"end":return e.stop()}},null,null,[[0,18]])},exports.lastSeenPetsQuery=function(t,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(query(SQL(_templateObject16(),t,r)));case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),res.status(500).send(e.t0.message);case 10:case"end":return e.stop()}},null,null,[[0,6]])};